<!doctype html>
<meta charset="utf-8">
<title>Policies</title>
<link rel="stylesheet" href="/static/styles.css">

<header>
  <h1 class="title">Policies</h1>
  <span id="health" class="pill">health: â€¦</span>
  <span id="auth" class="pill">auth: off</span>
  <span class="header-actions">
    <input id="apikey" class="key-input" placeholder="X-API-Key (optional)">
    <button id="saveKey">Save key</button>
    <button id="clearKey">Clear</button>
  </span>
</header>

<div id="msg" class="banner"></div>

<form class="inline" onsubmit="event.preventDefault(); add();">
  <input id="number" placeholder="number" required minlength="3">
  <input id="holder" placeholder="holder" required minlength="2">
  <input id="premium" type="number" step="0.01" min="0" placeholder="premium" required>
  <input id="status" placeholder="status" required minlength="2">
  <button>Add</button>
</form>

<form class="inline" method="get">
  <input name="q" value="{{ q }}" placeholder="search">
  <button>Search</button>
</form>

<button id="exportCsv" style="margin-top:.5rem">Export CSV</button>

<table>
  <thead>
    <tr>
      <th data-sort="id">#</th>
      <th data-sort="number">Number</th>
      <th data-sort="holder">Holder</th>
      <th data-sort="premium">Premium</th>
      <th data-sort="status">Status</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for p in items %}
    <tr>
      <td>{{p.id}}</td>
      <td>{{p.number}}</td>
      <td>{{p.holder}}</td>
      <td>{{"%.2f"|format(p.premium)}}</td>
      <td><span class="status {{p.status}}">{{p.status}}</span></td>
      <td><button class="btn-del" data-id="{{p.id}}">Delete</button></td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<script type="module" src="/static/main.js"></script>
